<!-- Header Navbar -->
<user-navbar></user-navbar>
<!--/.Header Navbar -->

<!-- Content -->
<div class=" container userProfile">
	<div class="row">
		<div class="col-md-12 col-bg-12">
			<center>
				<h1>{{userCtrl.user.name}} {{userCtrl.user.lastName}}</h1>
				<h3>{{userCtrl.user.username}}</h3>
			</center>

		</div>
	</div>
</div>
<div class="container shadow">
	<div class=" container">
		<div class="col-md-6 col-bg-6 border-col">
			<h2 class="inline">Books</h2>
			<button class="btn btn-default create-btn" type="submit" ng-click="userCtrl.changeBookCreation()">Create New Book <span class="glyphicon glyphicon-plus button-icon" aria-hidden="true"></span></button>
			<!-- ADD TABLE WITH USER BOOKS HERE -->
			<table class="table table-bordered" ng-show="!userCtrl.bookCreation">
				<thead>
					<tr>
						<th class="center">Book Title</th>
						<th class="center">Edit</th>
						<th class="center">Publish</th>
						<th class="center">Download</th>
						<th class="center">Delete</th>
					</tr>
				</thead>
				<tbody ng-repeat="book in userCtrl.user.books">
					<tr>
						<td>{{book.title}}</td>
						<td class="center icon"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></td>
						<td class="center icon" ng-click="userCtrl.publishBook(book)">
							<span ng-show="book.publish" class="glyphicon glyphicon-check" aria-hidden="true"></span>
							<span ng-show="!book.publish" class="glyphicon glyphicon-unchecked" aria-hidden="true"></span>
						</td>
						<td class="center icon"><span class="glyphicon glyphicon-download-alt" aria-hidden="true"></span></td>
						<td class="center icon" ng-confirm-click="Are you sure to delete this book?" confirmed-click="userCtrl.deleteBook(book)">
							<span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
						</td>
					</tr>
				</tbody>
			</table>

			<!--create Book Form-->
			<form name="createBookForm" class="Form" ng-show="userCtrl.bookCreation" ng-submit="userCtrl.createBook()">
				<div class="form-group">
					<label>Title</label>
					<input name="title" type="text" class="form-control" placeholder="Title" ng-model="userCtrl.newBook.title" required>
				</div>

				<div class="form-group">
					<label>Cover Image</label>
					<br>
					<button type="file" class="btn btn-default inline" ng-model="userCtrl.newBook.cover"  ngf-pattern="'image/*'" ngf-select="upload(file)">Upload Image File</button>
					<!-- IMAGE -->
					<img ngf-src="userCtrl.newBook.cover" id="img" class="inline" width="60" height="60">
					<!-- /IMAGE -->
				</div>

				<div class="form-group">
					<label>Description</label>
					<input name="description" type="text" class="form-control" placeholder="Description" ng-model="userCtrl.newBook.description" required>
				</div>

				<input type="submit" value="Create Book" class="btn btn-default inline"/>
				<button class="btn btn-default inline" ng-click="userCtrl.cancelCreateBook()">Cancel</button>
			</form>
			<!--/create Book Form-->

		</div>

		<div class="col-md-offset-1 col-bg-offset-1 col-md-5 col-bg-5 border-col">

			<h2 class="inline">User Information</h2>
			<button class="btn btn-default create-btn" ng-click="userCtrl.changeUpdate()" ng-show="!userCtrl.editUser">Edit Profile <span class="glyphicon glyphicon-pencil button-icon" aria-hidden="true"></span></button>


			<table class="table table-bordered" ng-show="!userCtrl.editUser">
				<tr>
					<th>Name:</th>
					<td>{{userCtrl.user.name}}</td>
				</tr>
				<tr>
					<th>Last Name:</th>
					<td>{{userCtrl.user.lastName}}</td>
				</tr>
				<tr>
					<th>Username:</th>
					<td>{{userCtrl.user.username}}</td>
				</tr>
				<tr>
					<th>Email:</th>
					<td>{{userCtrl.user.email}}</td>
				</tr>
			</table>

			<form name="UserForm" class="Form" ng-show="userCtrl.editUser" ng-submit="userCtrl.updateUser()" novalidate>
				<div class="form-group">
					<label>Name</label>
					<input name="lastName" type="text" class="form-control" placeholder="Name" ng-model="userCtrl.updUser.name" required>
				</div>

				<div class="form-group">
					<label>Last Name</label>
					<input name="lastName" type="text" class="form-control" placeholder="Last Name" ng-model="userCtrl.updUser.lastName" required>
				</div>

				<div class="form-group">
					<label>Email address</label>
					<input name="email" type="email" class="form-control" placeholder="Email" ng-model="userCtrl.updUser.email" required>
				</div>

				<div class="form-group">
					<label>Password</label>
					<input name="password" type="password" class="form-control" placeholder="Password" ng-model="userCtrl.updUser.password" minlength="8" maxlength="16">
				</div>

				<input type="submit" value="Update User" class="btn btn-default inline"/>
				<button class="btn btn-default inline" ng-click="userCtrl.cancelUpdate()">Cancel</button>
			</form>

		</div>
	</div>
</div>
